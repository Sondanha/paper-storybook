# Worker 프로세스용 (RQ 기반)
FROM python:3.11-slim

RUN apt-get update && apt-get install -y \
    graphviz \
    fonts-nanum \
    && rm -rf /var/lib/apt/lists/*

WORKDIR /app

COPY requirements.txt .
RUN pip install --no-cache-dir -r requirements.txt

COPY . .

# RQ 워커 실행 (큐 이름 = storybook)
CMD ["rq", "worker", "storybook"]
